<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Blog</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
      body {
        font-family: 'Inter', sans-serif;
        color: #343a40;
        /* 배경을 위한 그라데이션 스타일 추가 */
        background: linear-gradient(to bottom, #f0f4f8, #e0e6ed);
      }
      .container { max-width: 1024px; }
      .header { background-color: #ffffff; padding: 1.5rem; border-bottom: 1px solid #e9ecef; }
      .post-grid {
        display: grid;
        grid-template-columns: repeat(1, minmax(0, 1fr));
        gap: 1.5rem;
      }
      @media (min-width: 1024px) {
        .post-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }
      .post-card {
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.08);
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        border: 1px solid #e9ecef;
      }
      .post-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
      }
      .post-card a {
        text-decoration: none;
        color: inherit;
      }
      .post-card a:hover .font-bold {
        color: #03254c;
      }
    </style>
</head>
<body class="bg-gray-50 pb-10">
<div class="header shadow-sm sticky top-0 z-50">
    <div class="container mx-auto px-4 lg:px-0 flex flex-col md:flex-row md:justify-between md:items-center">
        <a href="#" class="text-2xl font-bold text-gray-800 my-2 md:my-0">My Blog</a>
        <div class="flex items-center mt-2 md:mt-0 relative w-full md:w-auto">
            <div class="relative w-full">
                <input type="text" id="searchInput" placeholder="포스트 검색..." class="pl-10 pr-4 py-2 w-full md:w-64 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
        </div>
    </div>
</div>
<main class="container mx-auto mt-10 px-4 lg:px-0">
    <div id="postList" class="post-grid">
        <!-- Posts will be dynamically inserted here -->
    </div>
    <div id="pagination" class="flex justify-center items-center mt-8 space-x-4">
        <button id="prevBtn" class="bg-white text-gray-700 px-4 py-2 rounded-full shadow-md hover:bg-gray-100 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
            <i class="fas fa-arrow-left"></i>
        </button>
        <span id="pageInfo" class="text-gray-600 font-medium">1 / 1</span>
        <button id="nextBtn" class="bg-white text-gray-700 px-4 py-2 rounded-full shadow-md hover:bg-gray-100 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
            <i class="fas fa-arrow-right"></i>
        </button>
    </div>
</main>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const postsPerPage = 6;
        let currentPage = 1;
        let allPosts = [];
        let filteredPosts = [];

        const postList = document.getElementById('postList');
        const searchInput = document.getElementById('searchInput');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const pageInfo = document.getElementById('pageInfo');

        // Fetch posts from posts.json
        fetch('posts.json')
            .then(response => response.json())
            .then(data => {
                allPosts = data.sort((a, b) => new Date(b.date) - new Date(a.date));
                filteredPosts = allPosts;
                renderPosts();
            });

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            filteredPosts = allPosts.filter(post =>
                post.title.toLowerCase().includes(searchTerm)
            );
            currentPage = 1;
            renderPosts();
        });

        // Pagination
        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderPosts();
            }
        });

        nextBtn.addEventListener('click', () => {
            const totalPages = Math.ceil(filteredPosts.length / postsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderPosts();
            }
        });

        // Render posts to the page
        function renderPosts() {
            postList.innerHTML = '';
            const start = (currentPage - 1) * postsPerPage;
            const end = start + postsPerPage;
            const postsToRender = filteredPosts.slice(start, end);

            postsToRender.forEach(post => {
                const postCard = document.createElement('div');
                postCard.className = 'post-card p-6';
                postCard.innerHTML = `
                        <a href="${post.url}" class="block">
                            <h2 class="text-xl md:text-2xl font-bold mb-2">${post.title}</h2>
                            <p class="text-sm text-gray-500 mb-4">
                                <span><i class="fas fa-user mr-2"></i>${post.author}</span>
                                <span class="ml-4"><i class="fas fa-calendar-alt mr-2"></i>${post.date}</span>
                            </p>
                            <p class="text-gray-700 leading-relaxed">${post.summary}</p>
                        </a>
                    `;
                postList.appendChild(postCard);
            });

            updatePagination();
        }

        // Update pagination buttons and info
        function updatePagination() {
            const totalPages = Math.ceil(filteredPosts.length / postsPerPage);
            pageInfo.textContent = `${currentPage} / ${totalPages || 1}`;
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages || totalPages === 0;
        }
    });
</script>
</body>
</html>
